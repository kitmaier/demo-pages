<html>
<head>
<style>
table, th, tr, td {
  border: 1px solid;
  font-family: monospace;
}
th {
  font-weight: bold;
  text-align: center;
}
</style>
</head>
<body>
<h1>One Of The Logic Puzzles Of All Time</h1>
<p style="text-indent:40px;">This page is based on a <a href="https://www.youtube.com/watch?v=uUPr07ThSH0">video</a> about a logic puzzle.</p>
<p style="text-indent:40px;">In this puzzle there are four people who have four jobs, speak using three code words, and have rules about what answers they can give to questions.</p>
<p style="text-indent:80px;"><tt>People</tt></p>
<p style="text-indent:120px;"><tt>Alice, Bob, Carol, Dave</tt></p>
<p style="text-indent:80px;"><tt>Codewords</tt></p>
<p style="text-indent:120px;"><tt>Foo, Bar, Baz</tt></p>
<p style="text-indent:80px;"><tt>Jobs</tt></p>
<p style="text-indent:120px;"><tt>Mathematician - Accurately answers Yes or No using two code words</tt></p>
<p style="text-indent:120px;"><tt>Physicist - Accurately answers Yes or No using the same two code words as the Mathematician but switched</tt></p>
<p style="text-indent:120px;"><tt>Engineer - Randomly answers using the same two codewords as the Mathematician</tt></p>
<p style="text-indent:120px;"><tt>Philosopher - Always answers Maybe with the remaining codeword</tt></p>
<p style="text-indent:40px;">The goal of the puzzle is to identify what job each person has.</p>
<p style="text-indent:40px;">There is a solution of this puzzle with at most 5 questions in the worst case.</p>
<p style="text-indent:40px;">We will need to find out the identity of all 4 people. We will not need to know and will not find out which code word means Yes or No, but we will find out which code word means Maybe in all but one case. </p>
<p style="text-indent:40px;">Without loss of generality, because all the names and codewords start out interchangeable, we may as well assume that the first question is asked of the first person and the first response is Foo. </p>
<p style="text-indent:40px;">We will start by listing out all of the possible combinations, or parallel worlds, which could be consistent with Foo being the answer to that first question.</p>
<p style="text-indent:40px;">Then we will list out all of the answers to the questions. In many cases, these answers are totally determined by the identity of the person the question is asked of. In the other cases, the answers can be freely chosen by phrasing the question appropriately. The perfect question to get the right response can be complicated, so for now questions will be stated in a simplified form, and then expanded to full detail later. </p>
<p style="text-indent:40px;">We will require a notion of trustworthiness, where the most trustworthy are the Mathematician and Physicist, the next most trustworthy is the Philosopher, and the least trustworthy is the Engineer. More explanation for this ordering will come later on. Choosing between the Mathematician and Physicist will never turn out to be necessary, because the Philosopher and Engineer do not make choices, and because the Mathematician and Physicist will not be asked to judge their own trustworthiness. </p>
<p style="text-indent:40px;">As the first three questions progress, codewords that have already been used will be chosen to navigate back to the individual who first used them, and codewords that have not been used will be chosen to navigate to a new individual for questioning. This phase of questioning is over when all three questions are answered or immediately if it navigates back to Alice. In the next phase all questions will be addressed to the person selected by this phase, as they have been determined to be totally trustworthy. </p>
<p style="text-indent:80px;"><tt>Q1 to Alice: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Bob</tt></p>
<p style="text-indent:120px;"><tt>Bar: Carol</tt></p>
<p style="text-indent:120px;"><tt>Baz: Dave</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Bob: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Alice</tt></p>
<p style="text-indent:120px;"><tt>Bar: Carol</tt></p>
<p style="text-indent:120px;"><tt>Baz: Dave</tt></p>
<p style="text-indent:80px;"><tt>Q3 to Carol if Q2 answer was Bar: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Alice</tt></p>
<p style="text-indent:120px;"><tt>Bar: Bob</tt></p>
<p style="text-indent:120px;"><tt>Baz: Dave</tt></p>
<p style="text-indent:80px;"><tt>Q3 to Dave if Q2 answer was Baz: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Alice</tt></p>
<p style="text-indent:120px;"><tt>Baz: Bob</tt></p>
<p style="text-indent:120px;"><tt>Bar: Carol</tt></p>
<!-- TODO: what if I merge the Q2Bar and Q2Baz cases in the table below? -->
<p style="text-indent:80px;"><tt></tt></p>
<p style="text-indent:80px;"><tt></tt></p>
<p style="text-indent:80px;"><tt></tt></p>
<p style="text-indent:40px;">But how can we be sure that this final person is trustworthy? We will consider all the possible cases, in terms of the order of jobs that are held by the people the questions are addressed to. The Mathematician and Physicist are the only two trustworthy roles, and will be used interchangeably in this listing. Crucially, in this listing the Mathematician and Physicist can always avoid directing to the Engineer.</p>
<p style="text-indent:80px;"><tt>Engineer->Foo->Philosopher->Bar->Mathematician->Baz->Physicist</tt></p>
<p style="text-indent:120px;"><tt>The Philosopher cannot say Foo, so will have to direct to someone trustworthy, who will then direct to the other trustworthy person.</tt></p>
<p style="text-indent:80px;"><tt>Engineer->Foo->Mathematician->Bar->Philosopher->Baz->Physicist</tt></p>
<p style="text-indent:120px;"><tt>The Philosopher cannot say Foo or Bar, so will have to direct to the remaining trustworthy person.</tt></p>
<p style="text-indent:80px;"><tt>Engineer->Foo->Mathematician->Bar->Physicist->Bar->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Physicist can direct back to the trustworthy Mathematician using the same codeword.</tt></p>
<p style="text-indent:80px;"><tt>Philosopher->Foo->Engineer->Bar->Mathematician->Baz->Physicist</tt></p>
<p style="text-indent:120px;"><tt>The Engineer cannot say Foo, so will have to direct to someone trustworthy, who will then direct to the other trustworthy person.</tt></p>
<p style="text-indent:80px;"><tt>Philosopher->Foo->Mathematician->Bar->Physicist->Bar->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Physicist can direct back to the trustworthy Mathematician using the same codeword.</tt></p>
<p style="text-indent:80px;"><tt>Mathematician->Foo->Philosopher->Bar->Physicist->Foo->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Philosopher can only direct to the Physicist, because otherwise the Mathematician would have already.</tt></p>
<p style="text-indent:80px;"><tt>Mathematician->Foo->Physicist->Foo->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Physicist can direct back to the trustworthy Mathematician using the same codeword.</tt></p>
<p style="text-indent:40px;">Below is how the decision table looks right now, after just those introductory questions.</p>
<p/>
<table id="table1" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Trusted</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Simplified to just the part that is visible from the outside, the table looks like this. The person who is marked as Trusted is guaranteed to be either the Mathematician or Physicist.</p>
<p/>
<table id="table1_1" style="width:200px;">
	<tr>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Trusted</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Now the process gets more complicated, as each sequence of answers to the first phase splits off a universe where we can ask a different set of followup questions in the second phase. In most of these questions, we will ask the trusted person to repeat a word they have already said if some statement is true, otherwise say the other word that they can say. </p>
<p style="text-indent:80px;"><tt>FooFoo - Q3 to Alice: Foo if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooFooXxx - Q4 to Alice: Foo if Carol is the Engineer.</tt></p>
<p style="text-indent:80px;"><tt>FooXxxFoo - Q4 to Alice: Foo if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBarBar - Q4 to Bob: Bar if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBarBarBar - Q5 to Bob: Bar if Alice is the Engineer.</tt></p>
<p style="text-indent:80px;"><tt>FooBazBaz - Q4 to Bob: Baz if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBazBazBaz - Q5 to Bob: Baz if Alice is the Engineer.</tt></p>
<p style="text-indent:80px;"><tt>FooBazBar - Q4 to Carol: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].</tt></p>
<p style="text-indent:80px;"><tt>FooBazBarXxx - Q5 to Carol: Repeat your last response if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBarBaz - Q4 to Dave: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].</tt></p>
<p style="text-indent:80px;"><tt>FooBarBazXxx - Q5 to Dave: Repeat your last response if you are the Mathematician.</tt></p>
<p style="text-indent:40px;">Those results are filled in to the below table. Each set of responses to the questions is unique, and completely identifies the data on the left. Something interesting is that in most cases we have learned the codeword for Maybe without asking for it directly, either by getting a response from the Philosopher, or by process of elimination from the other words spoken. </p>
<p style="text-indent:40px;">If the initial setup is randomized, and the Engineer chooses responses randomly, then the average number of questions asked will be 4(1/2+2/24+2/48)+5(4/24+10/48) = 4.375.</p>
<p/>
<table id="table2" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Below is the full data sorted by the answers to the questions. The other cases were generated from the "Q1:Foo" version by swapping two columns and swapping two codewords, then sorting. This lookup table could be used while playing the game, using the expanded question list below. </p>
<p style="margin-left:80px;"><tt>
Q1 to Alice: Which of the other three people is the most trustworthy? [Foo: Bob, Bar: Carol, Baz: Dave]<br/>
Foo - Q2 to Bob: Which of the other three people is the most trustworthy? [Foo: Alice, Bar: Carol, Baz: Dave]<br/>
FooBar - Q3 to Carol: Which of the other three people is the most trustworthy? [Foo: Alice, Bar: Bob, Baz: Dave]<br/>
FooBaz - Q3 to Dave: Which of the other three people is the most trustworthy? [Foo: Alice, Baz: Bob, Bar: Carol]<br/>
FooFoo - Q3 to Alice: Foo if you are the Mathematician.<br/>
FooFooXxx - Q4 to Alice: Foo if Carol is the Engineer.<br/>
FooXxxFoo - Q4 to Alice: Foo if you are the Mathematician.<br/>
FooBarBar - Q4 to Bob: Bar if you are the Mathematician.<br/>
FooBarBarBar - Q5 to Bob: Bar if Alice is the Engineer.<br/>
FooBazBaz - Q4 to Bob: Baz if you are the Mathematician.<br/>
FooBazBazBaz - Q5 to Bob: Baz if Alice is the Engineer.<br/>
FooBazBar - Q4 to Carol: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].<br/>
FooBazBarXxx - Q5 to Carol: Repeat your last response if you are the Mathematician.<br/>
FooBarBaz - Q4 to Dave: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].<br/>
FooBarBazXxx - Q5 to Dave: Repeat your last response if you are the Mathematician.<br/>
Bar - Q2 to Carol: Which of the other three people is the most trustworthy? [Bar: Alice, Foo: Bob, Baz: Dave]<br/>
BarFoo - Q3 to Bob: Which of the other three people is the most trustworthy? [Bar: Alice, Foo: Carol, Baz: Dave]<br/>
BarBaz - Q3 to Dave: Which of the other three people is the most trustworthy? [Bar: Alice, Baz: Carol, Foo: Bob]<br/>
BarBar - Q3 to Alice: Bar if you are the Mathematician.<br/>
BarBarXxx - Q4 to Alice: Bar if Bob is the Engineer.<br/>
BarXxxBar - Q4 to Alice: Bar if you are the Mathematician.<br/>
BarFooFoo - Q4 to Carol: Foo if you are the Mathematician.<br/>
BarFooFooFoo - Q5 to Carol: Foo if Alice is the Engineer.<br/>
BarBazBaz - Q4 to Carol: Baz if you are the Mathematician.<br/>
BarBazBazBaz - Q5 to Carol: Baz if Alice is the Engineer.<br/>
BarBazFoo - Q4 to Bob: The next in cyclic sequence after the codeword for Maybe in [Bar,Foo,Baz].<br/>
BarBazFooXxx - Q5 to Bob: Repeat your last response if you are the Mathematician.<br/>
BarFooBaz - Q4 to Dave: The next in cyclic sequence after the codeword for Maybe in [Bar,Foo,Baz].<br/>
BarFooBazXxx - Q5 to Dave: Repeat your last response if you are the Mathematician.<br/>
Baz - Q2 to Dave: Which of the other three people is the most trustworthy? [Baz: Alice, Bar: Carol, Foo: Bob]<br/>
BazBar - Q3 to Carol: Which of the other three people is the most trustworthy? [Baz: Alice, Bar: Dave, Foo: Bob]<br/>
BazFoo - Q3 to Bob: Which of the other three people is the most trustworthy? [Baz: Alice, Foo: Dave, Bar: Carol]<br/>
BazBaz - Q3 to Alice: Baz if you are the Mathematician.<br/>
BazBazXxx - Q4 to Alice: Baz if Carol is the Engineer.<br/>
BazXxxBaz - Q4 to Alice: Baz if you are the Mathematician.<br/>
BazBarBar - Q4 to Dave: Bar if you are the Mathematician.<br/>
BazBarBarBar - Q5 to Dave: Bar if Alice is the Engineer.<br/>
BazFooFoo - Q4 to Dave: Foo if you are the Mathematician.<br/>
BazFooFooFoo - Q5 to Dave: Foo if Alice is the Engineer.<br/>
BazFooBar - Q4 to Carol: The next in cyclic sequence after the codeword for Maybe in [Baz,Bar,Foo].<br/>
BazFooBarXxx - Q5 to Carol: Repeat your last response if you are the Mathematician.<br/>
BazBarFoo - Q4 to Bob: The next in cyclic sequence after the codeword for Maybe in [Baz,Bar,Foo].<br/>
BazBarFooXxx - Q5 to Bob: Repeat your last response if you are the Mathematician.<br/>
<p/>
<table id="table3" style="width:800px;">
	<tr>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
	</tr>
</table>
<p/>

</body>
<script>

let tableData1 = [
	"EDMPBFBZ4",
	"EDMPZFZB3",
	"EDPMBFBZ4",
	"EDPMZFZB3",
	"EMDPBFZZ2",
	"EMDPZFBZ4",
	"EMPDBFZB3",
	"EMPDZFBB2",
	"EPDMBFZZ2",
	"EPDMZFBZ4",
	"EPMDBFZB3",
	"EPMDZFBB2",
	"DEMPFFBZ4",
	"DEMPFFZB3",
	"DEPMFFBZ4",
	"DEPMFFZB3",
	"DMEPFFZZ2",
	"DMPEFFBB2",
	"DPEMFFZZ2",
	"DPMEFFBB2",
	"MDEPZFZF1",
	"MDPEBFBF1",
	"MPED-FF-1",
	"MPDE-FF-1",
	"PDEMZFZF1",
	"PDMEBFBF1",
	"PMED-FF-1",
	"PMDE-FF-1",
]
let tableData1_1 = [
	"FBZ4",
	"FZB3",
	"FZZ2",
	"FBB2",
	"FZF1",
	"FBF1",
	"FF-1",
]
let tableData2 = [
	"EDMPBFBZZF",
	"EDMPZFZBFF",
	"EDPMBFBZZZ",
	"EDPMZFZBFB",
	"EMDPBFZZZZ",
	"EMDPZFBZFB",
	"EMPDBFZBZF",
	"EMPDZFBBBB",
	"EPDMBFZZF-",
	"EPDMZFBZFF",
	"EPMDBFZBZZ",
	"EPMDZFBBF-",
	"DEMPFFBZBZ",
	"DEMPFFZBBB",
	"DEPMFFBZBB",
	"DEPMFFZBBZ",
	"DMEPFFZZZB",
	"DMPEFFBBBZ",
	"DPEMFFZZB-",
	"DPMEFFBBZ-",
	"MDEPZFZFF-",
	"MDPEBFBFF-",
	"MPED-FFFF-",
	"MPDEBFFFZ-",
	"MPDEZFFFB-",
	"PDEMZFZFB-",
	"PDMEBFBFZ-",
	"PMEDBFFZF-",
	"PMEDZFFBF-",
	"PMDEBFFZZ-",
	"PMDEZFFBB-",
]
let tableData3 = [
	"FFFF-MPED-",
	"FFFB-MPDEZ",
	"FFFZ-MPDEB",
	"FFBF-PMEDZ",
	"FFBB-PMDEZ",
	"FFZF-PMEDB",
	"FFZZ-PMDEB",
	"FBFF-MDPEB",
	"FBFZ-PDMEB",
	"FBBF-EPMDZ",
	"FBBBBEMPDZ",
	"FBBBZDMPEF",
	"FBBZ-DPMEF",
	"FBZFFEPDMZ",
	"FBZFBEMDPZ",
	"FBZBBDEPMF",
	"FBZBZDEMPF",
	"FBZZFEDMPB",
	"FBZZZEDPMB",
	"FZFF-MDEPZ",
	"FZFB-PDEMZ",
	"FZBFFEDMPZ",
	"FZBFBEDPMZ",
	"FZBBBDEMPF",
	"FZBBZDEPMF",
	"FZBZFEMPDB",
	"FZBZZEPMDB",
	"FZZF-EPDMB",
	"FZZB-DPEMF",
	"FZZZBDMEPF",
	"FZZZZEMDPB",
	"BFFFFEPMDZ",
	"BFFFZDPMEB",
	"BFFB-EMPDZ",
	"BFFZ-DMPEB",
	"BFBB-MPDEF",
	"BFBZ-PMDEF",
	"BFZFFDPEMB",
	"BFZFZDMEPB",
	"BFZBFEDMPZ",
	"BFZBBEDPMZ",
	"BFZZBEMDPF",
	"BFZZZEPDMF",
	"BBFF-PDMEZ",
	"BBFB-PEMDZ",
	"BBBF-MDPEZ",
	"BBBB-MEPD-",
	"BBBZ-MDPEF",
	"BBZB-PEMDF",
	"BBZZ-PDMEF",
	"BZFFFDMEPB",
	"BZFFZDPEMB",
	"BZFBFEPDMZ",
	"BZFBBEMDPZ",
	"BZFZBEPMDF",
	"BZFZZEMPDF",
	"BZBF-PEDMZ",
	"BZBB-MEDPZ",
	"BZZF-DEPMB",
	"BZZB-EDPMF",
	"BZZZFDEMPB",
	"BZZZZEDMPF",
	"ZFFFFEPDMB",
	"ZFFFBDPEMZ",
	"ZFFB-DMEPZ",
	"ZFFZ-EMDPB",
	"ZFBFFEDMPB",
	"ZFBFZEDPMB",
	"ZFBBFDMPEZ",
	"ZFBBBDPMEZ",
	"ZFBZBEMPDF",
	"ZFBZZEPMDF",
	"ZFZB-PMEDF",
	"ZFZZ-MPEDF",
	"ZBFFFEMPDB",
	"ZBFFZEPMDB",
	"ZBFBFDPMEZ",
	"ZBFBBDMPEZ",
	"ZBFZBEPDMF",
	"ZBFZZEMDPF",
	"ZBBF-DEMPZ",
	"ZBBBFDEPMZ",
	"ZBBBBEDPMF",
	"ZBBZ-EDMPF",
	"ZBZF-PEMDB",
	"ZBZZ-MEPDB",
	"ZZFF-PEDMB",
	"ZZFZ-PDEMB",
	"ZZBB-PEDMF",
	"ZZBZ-PDEMF",
	"ZZZF-MEDPB",
	"ZZZB-MEDPF",
	"ZZZZ-MDEP-",
]

function createTable(tableName,tableData) {
	configsTable = document.getElementById(tableName);
	for(let r = 0; r < tableData.length; r++) {
		let tr = configsTable.insertRow();
		for(let c = 0; c < tableData[r].length; c++) {
			let td = tr.insertCell();
			let ch = tableData[r].charAt(c);
			let text = '';
			switch (ch) {
				case 'E': text = 'Engineer'; break;
				case 'M': text = 'Mathematician'; break;
				case 'P': text = 'Physicist'; break;
				case 'D': text = 'Philosopher'; break;
				case 'F': text = 'Foo'; break;
				case 'B': text = 'Bar'; break;
				case 'Z': text = 'Baz'; break;
				case '1': text = 'Alice'; break;
				case '2': text = 'Bob'; break;
				case '3': text = 'Carol'; break;
				case '4': text = 'Dave'; break;
			}
			td.appendChild(document.createTextNode(text));
			let bgcolor = '#FFFFFC';
			// FFC6FF pink
			switch (ch) {
				case 'E': bgcolor = '#FFADAD'; break;
				case 'D': bgcolor = '#FFD6A5'; break;
				case 'P': bgcolor = '#FDFFB6'; break;
				case 'M': bgcolor = '#CAFFBF'; break;
				//case 'F': bgcolor = '#9BF6FF'; break;
				//case 'B': bgcolor = '#A0C4FF'; break;
				//case 'Z': bgcolor = '#BDB2FF'; break;
				case 'F': bgcolor = '#80E0FF'; break;
				case 'B': bgcolor = '#90A0FF'; break;
				case 'Z': bgcolor = '#D0B2FF'; break;
			}
			td.style.backgroundColor = bgcolor;
		}
	}
}
createTable('table1',tableData1);
createTable('table1_1',tableData1_1);
createTable('table2',tableData2);
createTable('table3',tableData3);

</script>
</html>
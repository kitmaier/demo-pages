<html>
<head>
<style>
table, th, tr, td {
  border: 1px solid;
  font-family: monospace;
}
th {
  font-weight: bold;
  text-align: center;
}
</style>
</head>
<body>
<h1>One Of The Logic Puzzles Of All Time</h1>
<p style="text-indent:40px;">This page is based on a <a href="https://www.youtube.com/watch?v=uUPr07ThSH0">video</a> about a logic puzzle.</p>
<p style="text-indent:40px;">In this puzzle there are four people who have four jobs, speak using three code words, and have rules about what answers they can give to questions.</p>
<p style="text-indent:80px;"><tt>People</tt></p>
<p style="text-indent:120px;"><tt>Alice, Bob, Carol, Dave</tt></p>
<p style="text-indent:80px;"><tt>Codewords</tt></p>
<p style="text-indent:120px;"><tt>Foo, Bar, Baz</tt></p>
<p style="text-indent:80px;"><tt>Jobs</tt></p>
<p style="text-indent:120px;"><tt>Mathematician - Accurately answers Yes or No using two code words</tt></p>
<p style="text-indent:120px;"><tt>Physicist - Accurately answers Yes or No using the same two code words as the Mathematician but switched</tt></p>
<p style="text-indent:120px;"><tt>Engineer - Randomly answers using the same two codewords as the Mathematician</tt></p>
<p style="text-indent:120px;"><tt>Philosopher - Always answers Maybe with the remaining codeword</tt></p>
<p style="text-indent:40px;">The goal of the puzzle is to identify what job each person has.</p>
<p style="text-indent:40px;">There is a solution of this puzzle with at most 5 questions in the worst case.</p>
<p style="text-indent:40px;">We will need to find out the identity of all 4 people. We will not need to know and will not find out which code word means Yes or No, but we will find out which code word means Maybe in all but one case. </p>
<p style="text-indent:40px;">Without loss of generality, because all the names and codewords start out interchangeable, we may as well assume that the first question is asked of the first person and the first response is Foo. </p>
<p style="text-indent:40px;">We will start by listing out all of the possible combinations, or parallel worlds, which could be consistent with Foo being the answer to that first question.</p>
<p style="text-indent:40px;">Then we will list out all of the answers to the questions. In many cases, these answers are totally determined by the identity of the person the question is asked of. In the other cases, the answers can be freely chosen by phrasing the question appropriately. The perfect question to get the right response can be complicated, so for now questions will be stated in a simplified form, and then expanded to full detail later. </p>
<p style="text-indent:40px;">We will require a notion of trustworthiness, where the most trustworthy are the Mathematician and Physicist, the next most trustworthy is the Philosopher, and the least trustworthy is the Engineer. More explanation for this ordering will come later on. Choosing between the Mathematician and Physicist will never turn out to be necessary, because the Philosopher and Engineer do not make choices, and because the Mathematician and Physicist will not be asked to judge their own trustworthiness. </p>
<p style="text-indent:40px;">As the first three questions progress, codewords that have already been used will be chosen to navigate back to the individual who first used them, and codewords that have not been used will be chosen to navigate to a new individual for questioning. This phase of questioning is over when all three questions are answered or immediately if it navigates back to Alice. In the next phase all questions will be addressed to the person selected by this phase, as they have been determined to be totally trustworthy. </p>
<p style="text-indent:80px;"><tt>Q1 to Alice: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Bob</tt></p>
<p style="text-indent:120px;"><tt>Bar: Carol</tt></p>
<p style="text-indent:120px;"><tt>Baz: Dave</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Bob: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Alice</tt></p>
<p style="text-indent:120px;"><tt>Bar: Carol</tt></p>
<p style="text-indent:120px;"><tt>Baz: Dave</tt></p>
<p style="text-indent:80px;"><tt>Q3 to Carol if Q2 answer was Bar: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Alice</tt></p>
<p style="text-indent:120px;"><tt>Bar: Bob</tt></p>
<p style="text-indent:120px;"><tt>Baz: Dave</tt></p>
<p style="text-indent:80px;"><tt>Q3 to Dave if Q2 answer was Baz: Which of the other three people is the most trustworthy?</tt></p>
<p style="text-indent:120px;"><tt>Foo: Alice</tt></p>
<p style="text-indent:120px;"><tt>Baz: Bob</tt></p>
<p style="text-indent:120px;"><tt>Bar: Carol</tt></p>
<!-- TODO: what if I merge the Q2Bar and Q2Baz cases in the table below? -->
<p style="text-indent:80px;"><tt></tt></p>
<p style="text-indent:80px;"><tt></tt></p>
<p style="text-indent:80px;"><tt></tt></p>
<p style="text-indent:40px;">But how can we be sure that this final person is trustworthy? We will consider all the possible cases, in terms of the order of jobs that are held by the people the questions are addressed to. The Mathematician and Physicist are the only two trustworthy roles, and will be used interchangeably in this listing. Crucially, in this listing the Mathematician and Physicist can always avoid directing to the Engineer.</p>
<p style="text-indent:80px;"><tt>Engineer->Foo->Philosopher->Bar->Mathematician->Baz->Physicist</tt></p>
<p style="text-indent:120px;"><tt>The Philosopher cannot say Foo, so will have to direct to someone trustworthy, who will then direct to the other trustworthy person.</tt></p>
<p style="text-indent:80px;"><tt>Engineer->Foo->Mathematician->Bar->Philosopher->Baz->Physicist</tt></p>
<p style="text-indent:120px;"><tt>The Philosopher cannot say Foo or Bar, so will have to direct to the remaining trustworthy person.</tt></p>
<p style="text-indent:80px;"><tt>Engineer->Foo->Mathematician->Bar->Physicist->Bar->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Physicist can direct back to the trustworthy Mathematician using the same codeword.</tt></p>
<p style="text-indent:80px;"><tt>Philosopher->Foo->Engineer->Bar->Mathematician->Baz->Physicist</tt></p>
<p style="text-indent:120px;"><tt>The Engineer cannot say Foo, so will have to direct to someone trustworthy, who will then direct to the other trustworthy person.</tt></p>
<p style="text-indent:80px;"><tt>Philosopher->Foo->Mathematician->Bar->Physicist->Bar->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Physicist can direct back to the trustworthy Mathematician using the same codeword.</tt></p>
<p style="text-indent:80px;"><tt>Mathematician->Foo->Philosopher->Bar->Physicist->Foo->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Philosopher can only direct to the Physicist, because otherwise the Mathematician would have already.</tt></p>
<p style="text-indent:80px;"><tt>Mathematician->Foo->Physicist->Foo->Mathematician</tt></p>
<p style="text-indent:120px;"><tt>The Physicist can direct back to the trustworthy Mathematician using the same codeword.</tt></p>
<p style="text-indent:40px;">Below is how the decision table looks right now, after just those introductory questions.</p>
<p/>
<table id="table1" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Trusted</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Simplified to just the part that is visible from the outside, the table looks like this. The person who is marked as Trusted is guaranteed to be either the Mathematician or Physicist.</p>
<p/>
<table id="table1_1" style="width:200px;">
	<tr>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Trusted</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Now the process gets more complicated, as each sequence of answers to the first phase splits off a universe where we can ask a different set of followup questions in the second phase. In most of these questions, we will ask the trusted person to repeat a word they have already said if some statement is true, otherwise say the other word that they can say. </p>
<p style="text-indent:80px;"><tt>FooFoo - Q3 to Alice: Foo if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooFooXxx - Q4 to Alice: Foo if Carol is the Engineer.</tt></p>
<p style="text-indent:80px;"><tt>FooXxxFoo - Q4 to Alice: Foo if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBarBar - Q4 to Bob: Bar if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBarBarBar - Q5 to Bob: Bar if Alice is the Engineer.</tt></p>
<p style="text-indent:80px;"><tt>FooBazBaz - Q4 to Bob: Baz if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBazBazBaz - Q5 to Bob: Baz if Alice is the Engineer.</tt></p>
<p style="text-indent:80px;"><tt>FooBazBar - Q4 to Carol: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].</tt></p>
<p style="text-indent:80px;"><tt>FooBazBarXxx - Q5 to Carol: Repeat your last response if you are the Mathematician.</tt></p>
<p style="text-indent:80px;"><tt>FooBarBaz - Q4 to Dave: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].</tt></p>
<p style="text-indent:80px;"><tt>FooBarBazXxx - Q5 to Dave: Repeat your last response if you are the Mathematician.</tt></p>
<p style="text-indent:40px;">Those results are filled in to the below table. Each set of responses to the questions is unique, and completely identifies the data on the left. Something interesting is that in most cases we have learned the codeword for Maybe without asking for it directly, either by getting a response from the Philosopher, or by process of elimination from the other words spoken. </p>
<p style="text-indent:40px;">If the initial setup is randomized, and the Engineer chooses responses randomly, then the average number of questions asked will be 4(1/2+2/24+2/48)+5(4/24+10/48) = 4.375.</p>
<p/>
<table id="table2" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Below is the full data sorted by the answers to the questions. The other cases were generated from the "Q1:Foo" version by swapping two columns and swapping two codewords, then sorting. This lookup table could be used while playing the game, using the expanded question list below. </p>
<p style="margin-left:80px;"><tt>
Q1 to Alice: Which of the other three people is the most trustworthy? [Foo: Bob, Bar: Carol, Baz: Dave]<br/>
Foo - Q2 to Bob: Which of the other three people is the most trustworthy? [Foo: Alice, Bar: Carol, Baz: Dave]<br/>
FooBar - Q3 to Carol: Which of the other three people is the most trustworthy? [Foo: Alice, Bar: Bob, Baz: Dave]<br/>
FooBaz - Q3 to Dave: Which of the other three people is the most trustworthy? [Foo: Alice, Baz: Bob, Bar: Carol]<br/>
FooFoo - Q3 to Alice: Foo if you are the Mathematician.<br/>
FooFooXxx - Q4 to Alice: Foo if Carol is the Engineer.<br/>
FooXxxFoo - Q4 to Alice: Foo if you are the Mathematician.<br/>
FooBarBar - Q4 to Bob: Bar if you are the Mathematician.<br/>
FooBarBarBar - Q5 to Bob: Bar if Alice is the Engineer.<br/>
FooBazBaz - Q4 to Bob: Baz if you are the Mathematician.<br/>
FooBazBazBaz - Q5 to Bob: Baz if Alice is the Engineer.<br/>
FooBazBar - Q4 to Carol: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].<br/>
FooBazBarXxx - Q5 to Carol: Repeat your last response if you are the Mathematician.<br/>
FooBarBaz - Q4 to Dave: The next in cyclic sequence after the codeword for Maybe in [Foo,Bar,Baz].<br/>
FooBarBazXxx - Q5 to Dave: Repeat your last response if you are the Mathematician.<br/>
Bar - Q2 to Carol: Which of the other three people is the most trustworthy? [Bar: Alice, Foo: Bob, Baz: Dave]<br/>
BarFoo - Q3 to Bob: Which of the other three people is the most trustworthy? [Bar: Alice, Foo: Carol, Baz: Dave]<br/>
BarBaz - Q3 to Dave: Which of the other three people is the most trustworthy? [Bar: Alice, Baz: Carol, Foo: Bob]<br/>
BarBar - Q3 to Alice: Bar if you are the Mathematician.<br/>
BarBarXxx - Q4 to Alice: Bar if Bob is the Engineer.<br/>
BarXxxBar - Q4 to Alice: Bar if you are the Mathematician.<br/>
BarFooFoo - Q4 to Carol: Foo if you are the Mathematician.<br/>
BarFooFooFoo - Q5 to Carol: Foo if Alice is the Engineer.<br/>
BarBazBaz - Q4 to Carol: Baz if you are the Mathematician.<br/>
BarBazBazBaz - Q5 to Carol: Baz if Alice is the Engineer.<br/>
BarBazFoo - Q4 to Bob: The next in cyclic sequence after the codeword for Maybe in [Bar,Foo,Baz].<br/>
BarBazFooXxx - Q5 to Bob: Repeat your last response if you are the Mathematician.<br/>
BarFooBaz - Q4 to Dave: The next in cyclic sequence after the codeword for Maybe in [Bar,Foo,Baz].<br/>
BarFooBazXxx - Q5 to Dave: Repeat your last response if you are the Mathematician.<br/>
Baz - Q2 to Dave: Which of the other three people is the most trustworthy? [Baz: Alice, Bar: Carol, Foo: Bob]<br/>
BazBar - Q3 to Carol: Which of the other three people is the most trustworthy? [Baz: Alice, Bar: Dave, Foo: Bob]<br/>
BazFoo - Q3 to Bob: Which of the other three people is the most trustworthy? [Baz: Alice, Foo: Dave, Bar: Carol]<br/>
BazBaz - Q3 to Alice: Baz if you are the Mathematician.<br/>
BazBazXxx - Q4 to Alice: Baz if Carol is the Engineer.<br/>
BazXxxBaz - Q4 to Alice: Baz if you are the Mathematician.<br/>
BazBarBar - Q4 to Dave: Bar if you are the Mathematician.<br/>
BazBarBarBar - Q5 to Dave: Bar if Alice is the Engineer.<br/>
BazFooFoo - Q4 to Dave: Foo if you are the Mathematician.<br/>
BazFooFooFoo - Q5 to Dave: Foo if Alice is the Engineer.<br/>
BazFooBar - Q4 to Carol: The next in cyclic sequence after the codeword for Maybe in [Baz,Bar,Foo].<br/>
BazFooBarXxx - Q5 to Carol: Repeat your last response if you are the Mathematician.<br/>
BazBarFoo - Q4 to Bob: The next in cyclic sequence after the codeword for Maybe in [Baz,Bar,Foo].<br/>
BazBarFooXxx - Q5 to Bob: Repeat your last response if you are the Mathematician.<br/>
<p/>
<table id="table3" style="width:800px;">
	<tr>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
	</tr>
</table>
<p/>
<h1>The Table Structure</h1>
<p style="text-indent:40px;">The table structure being used comes in three sections.</p>
<p style="text-indent:80px;"><tt>Jobs - the explicit assignment of a role to each person.</tt></p>
<p style="text-indent:80px;"><tt>Codewords - the explicit assignment of a meaning to each codeword.</tt></p>
<p style="text-indent:80px;"><tt>Answers - the explicit codeword reply to each question.</tt></p>
<p style="text-indent:40px;">These sections have different properties within the cause-and-effect structure of the puzzle. </p>
<p style="text-indent:80px;"><tt>Jobs - must be deduced with certainty by the end of the game, never directly available for observation.</tt></p>
<p style="text-indent:80px;"><tt>Codewords - might or might not be deduced by the end of the game, never directly available for observation.</tt></p>
<p style="text-indent:80px;"><tt>Answers - the only part that can be observed or influenced by the player.</tt></p>
<p style="text-indent:40px;">At any given point in gameplay, there is a set of Jobs+Codewords assignments that are consistent with the answers provided to the questions so far. At the beginning of the game, this is the full set of all possible combinations, and at the end, it must be a single assignment of Jobs with possibly one or more assignments of Codewords.</p>
<p style="text-indent:40px;">Suppose we were to ask the question "Are you the Mathematician?" to each person, and receive the below responses. </p>
<p style="text-indent:80px;"><tt>Alice - Bar</tt></p>
<p style="text-indent:80px;"><tt>Bob - Foo</tt></p>
<p style="text-indent:80px;"><tt>Carol - Baz</tt></p>
<p style="text-indent:80px;"><tt>Dave - Foo</tt></p>
<p style="text-indent:40px;">Then at that point, below are the possible Jobs+Codewords assignments that are consistent with that, where Yes and No are interpreted from the perspective of the Mathematician, and the Physicist takes the opposite view. Notice that Foo cannot mean Maybe in this case, because it would be impossible for two different people to give that response. The Mathematician and Physicist will respond with the same code word, so Foo must mean Yes.</p>

<p/>
<table id="table_ts1" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
	</tr>
</table>
<p/>

<p style="text-indent:40px;">Now that we have determined all possible scenarios consistent with the answers so far, we can design a question to narrow down the options further. This question can be conditional on the answers received, so we don't need to worry about what questions we would have asked given other answers. The questions can form a decision tree where we only worry about narrowing down what is in front of us now.</p>
<p style="text-indent:40px;">We should avoid asking questions of the Engineer, who will always give multiple answers in a way that expands the number of cases we have to deal with. We usually want to avoid the Philosopher, who will always give the same answer and will rarely help narrow things down. Since we know that Bob and Dave must not be the Engineer or Philosopher, we can direct questions to one of them. We could ask Bob, "Is Alice the Engineer?"</p>

<p/>
<table id="table_ts2" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Now we have completely determined the assignment of jobs in two cases, and we have two cases that are still indistinguishable based on the answers so far. This is the best outcome possible, as there are only three codewords, so it would not be possible to tell four scenarios apart with just one further answer. We will need to ask another question, conditional on the last answer being Foo. We could ask Bob, "Is Alice the Philosopher?". This question may seem redundant, but because the Mathematician and Physicist are using the codewords differently in these two cases, it will prevent them from saying the same word. </p>
<p/>
<table id="table_ts3" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
		<th>Q6</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">So after only two further questions the four cases are fully differentiated, and it cannot be done in any fewer. In this case the meanings of the codewords are also fully determined, but that is not necessary in general. </p>
<p style="text-indent:40px;">We could instead have asked a question of Alice, and the question itself would not matter, because both the Philsopher and the Engineer will ignore the question and reply with their default answers. </p>
<p/>
<table id="table_ts4" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">Now we still have the original four indistinguishable cases that are still indistinguishable, and an additional group of two cases which will need to be handled separately. This is why it is usually unhelpful to ask these two jobs any questions.</p>
<h1>How To Ask Questions</h1>
<p style="text-indent:40px;">As was explained in the video, it is possible to ask complicated and logically intricate questions to get information that seems like it would be difficult to get. </p>
<p style="text-indent:40px;">For instance, suppose that you know that Alice is either the Mathematician or the Physicist, and you also know that the Mathematician says "Bar" to mean "Yes" and "Baz" to mean "No". You cannot find out which they are by simply asking "Are you the Mathematician?". If the Mathematician says "Bar" to mean "Yes", then the Physicist will also say "Bar" to mean "No", which will give you no information.</p>
<p/>
<table id="table_htaq1" style="width:200px;">
	<tr>
		<th>Alice</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">You can ask a more complicated question which reveals the desired information. You could ask, "If you were asked if you were the Mathematician, would you say Bar?" The Mathematician would say Bar meaning Yes, and the Physicist would say Baz, also meaning Yes. </p>
<p/>
<table id="table_htaq2" style="width:200px;">
	<tr>
		<th>Alice</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
	</tr>
</table>
<p/>
<p/>
<p style="text-indent:40px;">This trick can even handle cases where we don't know which of the two codewords is Yes and which is No. By asking this style of question we can ask a person what their job is without finding out what codewords they use. </p>
<p/>
<table id="table_htaq3" style="width:200px;">
	<tr>
		<th>Alice</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">For an example of a more complex question, consider the below randomly generated list of answers. Also marked is what the codeword actually means to the person being asked the question. In order to ask a single question that gets this response in all cases, it is necessary to join together a detailed description of each row in the table marked True. Such a question would be, "Is it the case that you are the Mathematician and if you were asked first whether you are the Mathematician and then whether you are the Physicist you would reply either Bar then Foo or Baz then Foo, or is it the case that you are the Physicist and if you were asked first whether you are the Mathematician and then whether you are the Physicist you would reply Baz then Bar?"</p>
<p/>
<table id="table_htaq4" style="width:300px;">
	<tr>
		<th>Alice</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
		<th>Truth</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">It can be verified that for each row in the table, the person being asked the question ultimately responds with exactly the codeword intended. This means that the table of answers can be filled in nearly arbitrarily for questions directed to the Mathematician and Physicist, and a suitably complicated artificial question can be constructed which produces that combination of answers. </p>
<p style="text-indent:40px;">This further underscores that the most important problem is quickly identifying who the Mathematician and Physicist are so that as many questions as possible can be directed to them. </p>
<h1>Optimality</h1>
<p style="text-indent:40px;">What is the fewest questions needed in order to solve the puzzle? Can it be done in only four? I don't think so, and here's an explanation as to why. </p>
<p style="text-indent:40px;">First, there is an upper bound on how much complexity can be handled with only 4 questions, because there are only 3 legal answers to each question. This means there are at most 3*3*3*3 = 3^4 = 81 cases that can be unambiguously differentiated with 4 questions. In practice, the constraints of the puzzle will most likely make it difficult to achieve even that level of ideal performance. </p>
<p style="text-indent:40px;">So how many cases need to be differentiated? That will depend on the behavior of the Engineer and the Philosopher, and on how we handle Codewords.</p>
<p style="text-indent:40px;">Initially, there are 4! = 4*3*2*1 = 24 ways to permute the 4 jobs, and 3! = 3*2*1 = 6 ways to permute the 3 codewords, for a total of 24*6 = 144 cases. </p>
<p style="text-indent:40px;">However, the Engineer increases this, because they can give either answer to each question, meaning that we have to keep track of both outcomes as separate cases. The first question cannot avoid talking to the Engineer, so our count must include both outcomes for each of those 6*6 = 36 initial cases, bringing the total to 180. </p>
<p style="text-indent:40px;">It seems like it would be very difficult to avoid encountering the Engineer at least one more time. The solution above adds another 2*6 = 12 cases due to meeting the Engineer on the second question. It may be possible to reduce this number, but so far I don't see how. </p>
<p style="text-indent:40px;">We will now consider the codewords. The example above showed that it is possible to solve the puzzle without ever finding out which codeword is Yes and which is No, but still identified Maybe in most cases. This shows that the original count of 6 permutations of codewords was an overcounting, and we could actually have reduced that to only 3. That would take the previous count from 180 to 90. </p>
<p style="text-indent:40px;">In most cases, it is not possible to solve the puzzle without finding out the codeword that means Maybe along the way. The solution must identify every job, so if the Philosopher has spoken at all, then the codeword for Maybe is revealed. Similarly, if any of the other jobs have said two different words, then the third codeword must mean Maybe by process of elimination. So the only case where the codeword that means Maybe would not be revealed is if the Philosopher did not answer any questions, and the others only said one word over and over again. Even then, it is clear that Maybe is not that word. As there are three codewords, there are only three cases where this can happen. This reduces those cases from 3*3 = 9 to 2*3 = 6 and the total from 90 to 87. </p>
<p style="text-indent:40px;">Because 87 is greater than 81, it seems that it would be impossible to separate those 87 cases with only 4 questions.  </p>
<h1>Simplified Puzzles</h1>
<p style="text-indent:40px;">The old, traditional two guards puzzle contains only two jobs (Mathematician and Physicist) and only two codewords (Foo and Bar) and can be solved in one question, "Alice, would you say Foo if I asked you if you are the Mathematician?"</p>
<p/>
<table id="table_s1" style="width:300px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">What if one of these was the Philosopher instead, and we used all three codewords? Any question that might be directed to the Philosopher will provide incomplete information, so at least two questions are needed.</p>
<p style="text-indent:80px;"><tt>Q1 to Alice: Are you the Mathematician?</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Alice: Are you the Philosopher?</tt></p>
<p/>
<table id="table_s2" style="width:400px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">What if one of these was the Engineer instead, and we used two codewords? This is impossible to solve, because the Engineer can always give the same answer as the Mathematician, so there is no sequence of questions that would be guaranteed to differentiate them. Solving the puzzle when the Engineer is involved always relies on getting the Mathematician and Physicist to vouch for each other.</p>
<p style="text-indent:80px;"><tt>Q1 to Alice: Are you the Mathematician?</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Alice: Are you the Engineer?</tt></p>
<p/>
<table id="table_s3" style="width:400px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
		<th>Q2</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">What if there are only the Mathematician and Physicist, but there are still three codewords? This cannot be solved in one question. Suppose that a question were asked of Alice, and we looked only at the responses that the Mathematician can give. There is no single codeword that is available across all universes that the Mathematician is allowed to say, so there must be at least two different codewords used. The same will apply to the Physicist. Since there are only three codewords in all, there must be some codeword in common. That means that there is some response to the question that is consistent with Alice being both the Mathematician and Physicist, which means that one question is not enough. </p>
<p style="text-indent:80px;"><tt>Q1 to Alice: Are you the Mathematician?</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Alice: Are you either the Mathematician or the Physicist?</tt></p>
<p/>
<table id="table_s4" style="width:400px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Yes</th>
		<th>No</th>
		<th>Q1</th>
		<th>Q2</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">What if we have all jobs but the Engineer? This cannot be solved in two questions. Suppose it could, then there would need to be no more than 3*3 = 9 distinct cases. There are 3! = 3*2*1 = 6 permutations of the jobs, and there are 3 possible codewords for Maybe, which will be revealed in all but at most 3 universes, for a total of 15 cases that must be distinguished. It can be done with three questions, and the first two questions will be used to simultaneously identify both what Alice's job is, and what word means Maybe. </p>
<p style="text-indent:80px;"><tt>Q1 to Alice: What is the first word after the codeword for Maybe in cyclic order in [Foo, Bar, Baz] if you are the Mathematician, or the second if you are the Physicist?</tt></p>
<p style="text-indent:120px;"><tt>Full question: If the Mathematician were asked first whether they are the Mathematician and then whether they are the Physicist, is it the case that they would say either Foo then Bar, or Bar then Baz, or Baz then Foo?</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Alice: What is the word you can say that is different from your last answer?</tt></p>
<p style="text-indent:120px;"><tt>Full question: If the Mathematician were asked first whether they are the Mathematician and then whether they are the Physicist, is it the case that they would say either Bar then Foo, or Baz then Bar, or Foo then Baz?</tt></p>
<p style="text-indent:80px;"><tt>If the answers to Q1 and Q2 are different - Q3 to Alice: Repeat your answer to Q1 if Bob is the Philosopher, otherwise repeat your answer to Q2.</tt></p>
<p style="text-indent:120px;"><tt>Full question: Is it the case that Bob is the Philosopher and if the Mathematician were asked first whether they are the Mathematician and then whether they are the Physicist, they would say either Foo then Bar, or Bar then Baz, or Baz then Foo, or is it the case that Bob is not the Philosopher and if the Mathematician were asked first whether they are the Mathematician and then whether they are the Physicist, they would say either Bar then Foo, or Baz then Bar, or Foo then Baz?</tt></p>
<p style="text-indent:80px;"><tt>If the answers to Q1 and Q2 are the same - Q3 to Bob: What is the first word after the codeword for Maybe in cyclic order in [Foo, Bar, Baz] if you are the Mathematician, or the second if you are the Physicist?</tt></p>
<p style="text-indent:120px;"><tt>Full question: If the Mathematician were asked first whether they are the Mathematician and then whether they are the Physicist, is it the case that they would say either Foo then Bar, or Bar then Baz, or Baz then Foo?</tt></p>
<p/>
<table id="table_s5" style="width:500px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">But if we already knew what all the codewords meant, then it would be possible in only two questions. </p>
<p style="text-indent:80px;"><tt>Q1 to Alice: If asked whether you are the Mathematician, would you say Foo?</tt></p>
<p style="text-indent:80px;"><tt>If the answer to Q1 is Foo or Bar - Q2 to Alice: If asked whether Bob is the Philosopher, would you say Foo?</tt></p>
<p style="text-indent:80px;"><tt>If the answer to Q1 is Baz - Q2 to Bob: If asked whether you are the Mathematician, would you say Foo?</tt></p>
<p/>
<table id="table_s6" style="width:500px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
	</tr>
</table>
<p/>





<h1>Further Notes</h1>

<p style="text-indent:40px;">TODO: considering alternative where Foo stays on the same person instead of going back, so that trusted person is found in only two questions. After optimizing for followup questions, the average number of questions is 4(8/24+16/48)+5(4/24+8/48) = 4.333. </p>

<p/>
<table id="table4" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
	</tr>
</table>
<p/>

<p style="text-indent:40px;">TODO: considering alternative where original questions only go through Q2 which leaves all further questions to M and P other than 4 rows for Philosopher. The Philosopher is revealed by giving the same answer twice in a row, and then Bob can be asked who is M and who is P. The average number of questions is 4(1/2+12/48)+5(12/48) = 4.25. This table was filled in row by row to satisfy the constraints, so the associated questions would be long and arbitrary, there may be a rearrangement of this that produces simple, easy to understand questions at each stage. </p>


<p/>
<table id="table5" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
	</tr>
</table>

<p style="text-indent:40px;">TODO: incorporating original simpler solution that takes 7 questions </p>
<p style="text-indent:80px;"><tt>Q1 to Alice - Are you the Engineer?</tt></p>
<p style="text-indent:80px;"><tt>Q2 to Bob - Are you the Engineer?</tt></p>
<p style="text-indent:80px;"><tt>Q3 to Carol - Are you the Engineer?</tt></p>
<p style="text-indent:80px;"><tt>Q4 to Dave - Are you the Engineer?</tt></p>
<p style="text-indent:40px;">After these four questions, it must be the case that we see all three codewords. The Philosopher will always say Maybe, and the Mathematician and Physicist will say different words for No. There will also be two answers that match, because the codeword the Engineer says will have to match either the Mathematician or the Physicist. Without loss of generality, we may as well assume that the duplicated word comes first and is Foo, followed by Bar, then Baz. </p>
<p/>
<table id="table6" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
	</tr>
</table>
<p/>
<p style="text-indent:40px;">In the first four questions, we forced the Mathematician and Physicist to say their codeword for No. Now we can force them to say Yes. Then once we have identified one of them, we can ask direct questions about the others. </p>
<p style="text-indent:80px;"><tt>Q5 to Carol - Are you the Mathematician or Physicist?</tt></p>
<p style="text-indent:80px;"><tt>If Q5 answer is Foo: Q6 to Carol - If asked whether you are the Mathematician would you say Foo?</tt></p>
<p style="text-indent:80px;"><tt>If Q5 answer is Bar: Q6 to Dave - If asked whether you are the Mathematician would you say Foo?</tt></p>
<p style="text-indent:80px;"><tt>If Q5 answer is Foo: Q7 to Carol - If asked whether Bob is the Engineer would you say Foo?</tt></p>
<p style="text-indent:80px;"><tt>If Q5 answer is Bar: Q7 to Dave - If asked whether Bob is the Engineer would you say Foo?</tt></p>
<p/>
<table id="table7" style="width:800px;">
	<tr>
		<th>Alice</th>
		<th>Bob</th>
		<th>Carol</th>
		<th>Dave</th>
		<th>Yes</th>
		<th>No</th>
		<th>Maybe</th>
		<th>Q1</th>
		<th>Q2</th>
		<th>Q3</th>
		<th>Q4</th>
		<th>Q5</th>
		<th>Q6</th>
		<th>Q7</th>
	</tr>
</table>
<p/>

</body>
<script>

let tableData1 = [
	"EDMPBFBZ4",
	"EDMPZFZB3",
	"EDPMBFBZ4",
	"EDPMZFZB3",
	"EMDPBFZZ2",
	"EMDPZFBZ4",
	"EMPDBFZB3",
	"EMPDZFBB2",
	"EPDMBFZZ2",
	"EPDMZFBZ4",
	"EPMDBFZB3",
	"EPMDZFBB2",
	"DEMPFFBZ4",
	"DEMPFFZB3",
	"DEPMFFBZ4",
	"DEPMFFZB3",
	"DMEPFFZZ2",
	"DMPEFFBB2",
	"DPEMFFZZ2",
	"DPMEFFBB2",
	"MDEPZFZF1",
	"MDPEBFBF1",
	"MPED-FF-1",
	"MPDE-FF-1",
	"PDEMZFZF1",
	"PDMEBFBF1",
	"PMED-FF-1",
	"PMDE-FF-1",
]
let tableData1_1 = [
	"FBZ4",
	"FZB3",
	"FZZ2",
	"FBB2",
	"FZF1",
	"FBF1",
	"FF-1",
]
let tableData2 = [
	"EDMPBFBZZF",
	"EDMPZFZBFF",
	"EDPMBFBZZZ",
	"EDPMZFZBFB",
	"EMDPBFZZZZ",
	"EMDPZFBZFB",
	"EMPDBFZBZF",
	"EMPDZFBBBB",
	"EPDMBFZZF-",
	"EPDMZFBZFF",
	"EPMDBFZBZZ",
	"EPMDZFBBF-",
	"DEMPFFBZBZ",
	"DEMPFFZBBB",
	"DEPMFFBZBB",
	"DEPMFFZBBZ",
	"DMEPFFZZZB",
	"DMPEFFBBBZ",
	"DPEMFFZZB-",
	"DPMEFFBBZ-",
	"MDEPZFZFF-",
	"MDPEBFBFF-",
	"MPED-FFFF-",
	"MPDEBFFFZ-",
	"MPDEZFFFB-",
	"PDEMZFZFB-",
	"PDMEBFBFZ-",
	"PMEDBFFZF-",
	"PMEDZFFBF-",
	"PMDEBFFZZ-",
	"PMDEZFFBB-",
]
let tableData3 = [
	"FFFF-MPED-",
	"FFFB-MPDEZ",
	"FFFZ-MPDEB",
	"FFBF-PMEDZ",
	"FFBB-PMDEZ",
	"FFZF-PMEDB",
	"FFZZ-PMDEB",
	"FBFF-MDPEB",
	"FBFZ-PDMEB",
	"FBBF-EPMDZ",
	"FBBBBEMPDZ",
	"FBBBZDMPEF",
	"FBBZ-DPMEF",
	"FBZFFEPDMZ",
	"FBZFBEMDPZ",
	"FBZBBDEPMF",
	"FBZBZDEMPF",
	"FBZZFEDMPB",
	"FBZZZEDPMB",
	"FZFF-MDEPZ",
	"FZFB-PDEMZ",
	"FZBFFEDMPZ",
	"FZBFBEDPMZ",
	"FZBBBDEMPF",
	"FZBBZDEPMF",
	"FZBZFEMPDB",
	"FZBZZEPMDB",
	"FZZF-EPDMB",
	"FZZB-DPEMF",
	"FZZZBDMEPF",
	"FZZZZEMDPB",
	"BFFFFEPMDZ",
	"BFFFZDPMEB",
	"BFFB-EMPDZ",
	"BFFZ-DMPEB",
	"BFBB-MPDEF",
	"BFBZ-PMDEF",
	"BFZFFDPEMB",
	"BFZFZDMEPB",
	"BFZBFEDMPZ",
	"BFZBBEDPMZ",
	"BFZZBEMDPF",
	"BFZZZEPDMF",
	"BBFF-PDMEZ",
	"BBFB-PEMDZ",
	"BBBF-MDPEZ",
	"BBBB-MEPD-",
	"BBBZ-MDPEF",
	"BBZB-PEMDF",
	"BBZZ-PDMEF",
	"BZFFFDMEPB",
	"BZFFZDPEMB",
	"BZFBFEPDMZ",
	"BZFBBEMDPZ",
	"BZFZBEPMDF",
	"BZFZZEMPDF",
	"BZBF-PEDMZ",
	"BZBB-MEDPZ",
	"BZZF-DEPMB",
	"BZZB-EDPMF",
	"BZZZFDEMPB",
	"BZZZZEDMPF",
	"ZFFFFEPDMB",
	"ZFFFBDPEMZ",
	"ZFFB-DMEPZ",
	"ZFFZ-EMDPB",
	"ZFBFFEDMPB",
	"ZFBFZEDPMB",
	"ZFBBFDMPEZ",
	"ZFBBBDPMEZ",
	"ZFBZBEMPDF",
	"ZFBZZEPMDF",
	"ZFZB-PMEDF",
	"ZFZZ-MPEDF",
	"ZBFFFEMPDB",
	"ZBFFZEPMDB",
	"ZBFBFDPMEZ",
	"ZBFBBDMPEZ",
	"ZBFZBEPDMF",
	"ZBFZZEMDPF",
	"ZBBF-DEMPZ",
	"ZBBBFDEPMZ",
	"ZBBBBEDPMF",
	"ZBBZ-EDMPF",
	"ZBZF-PEMDB",
	"ZBZZ-MEPDB",
	"ZZFF-PEDMB",
	"ZZFZ-PDEMB",
	"ZZBB-PEDMF",
	"ZZBZ-PDEMF",
	"ZZZF-MEDPB",
	"ZZZB-MEDPF",
	"ZZZZ-MDEP-",
]

let tableData_ts1 = [
	"EMDPFBZBFZF",
	"EPDMFBZBFZF",
	"DMEPFZBBFZF",
	"DPEMFZBBFZF",
]

let tableData_ts2 = [
	"EMDPFBZBFZFF",
	"EPDMFBZBFZFB",
	"DMEPFZBBFZFZ",
	"DPEMFZBBFZFF",
]

let tableData_ts3 = [
	"EMDPFBZBFZFFB",
	"EPDMFBZBFZFB-",
	"DMEPFZBBFZFZ-",
	"DPEMFZBBFZFFZ",
]

let tableData_ts4 = [
	"EMDPFBZBFZFF",
	"EMDPFBZBFZFB",
	"EPDMFBZBFZFF",
	"EPDMFBZBFZFB",
	"DMEPFZBBFZFB",
	"DPEMFZBBFZFB",
]

let tableData_htaq1 = [
	"MBZB",
	"PBZB",
]
let tableData_htaq2 = [
	"MBZB",
	"PBZZ",
]
let tableData_htaq3 = [
	"MBZB",
	"MZBB",
	"PBZZ",
	"PZBZ",
]
let tableData_htaq4 = [
	"MFBBf",
	"MFZZf",
	"MBFBt",
	"MBZZf",
	"MZFZt",
	"MZBBf",
	"PFBFf",
	"PFZFf",
	"PBFBf",
	"PBZBf",
	"PZFZf",
	"PZBBt",
]

let tableData_s1 = [
	"MPFBF",
	"MPBFF",
	"PMFBB",
	"PMBFB",
]
let tableData_s2 = [
	"MDFBZFB",
	"MDFZBFZ",
	"MDBFZBF",
	"MDBZFBZ",
	"MDZFBZF",
	"MDZBFZB",
	"DMFBZZZ",
	"DMFZBBB",
	"DMBFZZZ",
	"DMBZFFF",
	"DMZFBBB",
	"DMZBFFF",
]
let tableData_s3 = [
	"MEFBFB",
	"MEBFBF",
	"EMFBFF",
	"EMFBFB",
	"EMFBBF",
	"EMFBBB",
	"EMBFBB",
	"EMBFBF",
	"EMBFFB",
	"EMBFFF",
]
let tableData_s4 = [
	"MPFBFF",
	"MPFZFF",
	"MPBFBB",
	"MPBZBB",
	"MPZFZZ",
	"MPZBZZ",
	"PMFBFB",
	"PMFZFZ",
	"PMBFBF",
	"PMBZBZ",
	"PMZFZF",
	"PMZBZB",
]
let tableData_s5 = [
	"MPDFBZZ",
	"MPDBZFF",
	"MPDZFBB",
	"MDPFBZB",
	"MDPBZFZ",
	"MDPZFBF",
	"PMDFZBB",
	"PMDBFZZ",
	"PMDZBFF",
	"PDMFZBZ",
	"PDMBFZF",
	"PDMZBFB",
	"DMPFFFB",
	"DMPBBBZ",
	"DMPZZZF",
	"DPMFFFZ",
	"DPMBBBF",
	"DPMZZZB",
]
let tableData_s6 = [
	"MPDFBZFB",
	"MDPFBZFF",
	"PMDFBZBB",
	"PDMFBZBF",
	"DMPFBZZF",
	"DPMFBZZB",
]


let tableData4 = [
	"EDMPBFBZZF",
	"EDMPZFZBBF",
	"EDPMBFBFZ-",
	"EDPMZFZFB-",
	"EMDPBFZZF-",
	"EMDPZFFBBB",
	"EMPDBFFZZZ",
	"EMPDZFBFB-",
	"EPDMBFZFZ-",
	"EPDMZFFBBF",
	"EPMDBFFZZF",
	"EPMDZFBBF-",
	"DEMPFFBZZZ",
	"DEMPFFZBBB",
	"DEPMFFBBZ-",
	"DEPMFFZBZ-",
	"DMEPFFZZB-",
	"DMPEFFBZB-",
	"DPEMFFZZZ-",
	"DPMEFFBBB-",
	"MDEPZFZBF-",
	"MDPEBFBZF-",
	"MPEDBFFZFZ",
	"MPEDZFFBFB",
	"MPDEBFFZFF",
	"MPDEZFFBFF",
	"PDEMZFZFF-",
	"PDMEBFBFF-",
	"PMED-FFFF-",
	"PMDEBFFFB-",
	"PMDEZFFFZ-",
]

let tableData5 = [
	"EDMPBFBFFF",
	"EDMPZFZFFF",
	"EDPMBFBFFZ",
	"EDPMZFZFFB",
	"EMDPBFZFZ-",
	"EMDPZFBZZF",
	"EMPDBFZBBF",
	"EMPDZFBBF-",
	"EPDMBFZZF-",
	"EPDMZFBZZB",
	"EPMDBFZBBZ",
	"EPMDZFBFB-",
	"DEMPFFBBBB",
	"DEMPFFZZZB",
	"DEPMFFBBBZ",
	"DEPMFFZZZZ",
	"DMEPFFZZB-",
	"DMPEFFBZB-",
	"DPEMFFZBZ-",
	"DPMEFFBBZ-",
	"MDEPZFZBF-",
	"MDPEBFBZF-",
	"MPEDBFFZZ-",
	"MPEDZFFBB-",
	"MPDEBFFZF-",
	"MPDEZFFBF-",
	"PDEMZFZFB-",
	"PDMEBFBFZ-",
	"PMED-FFFF-",
	"PMDEBFFFZ-",
	"PMDEZFFFB-",
]

let tableData6 = [
	"MEPDBFZFFBZ",
	"MEDPZFBFFBZ",
	"PEMDFBZFFBZ",
	"PEDMFZBFFBZ",
	"EMPDBFZFFBZ",
	"EMDPZFBFFBZ",
	"EPMDFBZFFBZ",
	"EPDMFZBFFBZ",
]

let tableData7 = [
	"MEPDBFZFFBZFBF",
	"MEDPZFBFFBZBZF",
	"PEMDFBZFFBZFFF",
	"PEDMFZBFFBZBFF",
	"EMPDBFZFFBZFBB",
	"EMDPZFBFFBZBZZ",
	"EPMDFBZFFBZFFB",
	"EPDMFZBFFBZBFZ",
]

function createTable(tableName,tableData) {
	configsTable = document.getElementById(tableName);
	for(let r = 0; r < tableData.length; r++) {
		let tr = configsTable.insertRow();
		for(let c = 0; c < tableData[r].length; c++) {
			let td = tr.insertCell();
			let ch = tableData[r].charAt(c);
			let text = '';
			switch (ch) {
				case 'E': text = 'Engineer'; break;
				case 'M': text = 'Mathematician'; break;
				case 'P': text = 'Physicist'; break;
				case 'D': text = 'Philosopher'; break;
				case 'F': text = 'Foo'; break;
				case 'B': text = 'Bar'; break;
				case 'Z': text = 'Baz'; break;
				case '1': text = 'Alice'; break;
				case '2': text = 'Bob'; break;
				case '3': text = 'Carol'; break;
				case '4': text = 'Dave'; break;
				case 't': text = 'True'; break;
				case 'f': text = 'False'; break;
			}
			td.appendChild(document.createTextNode(text));
			let bgcolor = '#FFFFFC';
			// FFC6FF pink
			switch (ch) {
				case 'E': bgcolor = '#FFADAD'; break;
				case 'D': bgcolor = '#FFD6A5'; break;
				case 'P': bgcolor = '#FDFFB6'; break;
				case 'M': bgcolor = '#CAFFBF'; break;
				//case 'F': bgcolor = '#9BF6FF'; break;
				//case 'B': bgcolor = '#A0C4FF'; break;
				//case 'Z': bgcolor = '#BDB2FF'; break;
				case 'F': bgcolor = '#80E0FF'; break;
				case 'B': bgcolor = '#90A0FF'; break;
				case 'Z': bgcolor = '#D0B2FF'; break;
				case 't': bgcolor = '#CAFFBF'; break;
				case 'f': bgcolor = '#FFADAD'; break;
			}
			td.style.backgroundColor = bgcolor;
		}
	}
}
createTable('table1',tableData1);
createTable('table1_1',tableData1_1);
createTable('table2',tableData2);
createTable('table3',tableData3);
createTable('table_ts1',tableData_ts1);
createTable('table_ts2',tableData_ts2);
createTable('table_ts3',tableData_ts3);
createTable('table_ts4',tableData_ts4);
createTable('table_htaq1',tableData_htaq1);
createTable('table_htaq2',tableData_htaq2);
createTable('table_htaq3',tableData_htaq3);
createTable('table_htaq4',tableData_htaq4);
createTable('table_s1',tableData_s1);
createTable('table_s2',tableData_s2);
createTable('table_s3',tableData_s3);
createTable('table_s4',tableData_s4);
createTable('table_s5',tableData_s5);
createTable('table_s6',tableData_s6);
createTable('table4',tableData4);
createTable('table5',tableData5);
createTable('table6',tableData6);
createTable('table7',tableData7);

function printPermutations(rules) {
	for(let c1 of ['M','P','E','D']) {
		for(let c2 of ['M','P','E','D']) {
			if(c1==c2) continue;
			for(let c3 of ['M','P','E','D']) {
				if(c1==c3||c2==c3) continue;
				for(let c4 of ['M','P','E','D']) {
					if(c1==c4||c2==c4||c3==c4) continue;
					for(let c5 of ['F','B','Z']) {
						for(let c6 of ['F','B','Z']) {
							if(c5==c6) continue;
							for(let c7 of ['F','B','Z']) {
								if(c5==c7||c6==c7) continue;
								if(rules=="blank") {
									console.log(c1+c2+c3+c4+c5+c6+c7);
								}
								if(rules=="table6") {
									let c8 = c1=='M'?c6:(c1=='P'?c5:(c1=='D'?c7:c5));
									let c9 = c2=='M'?c6:(c2=='P'?c5:(c2=='D'?c7:c5));
									let c10 = c3=='M'?c6:(c3=='P'?c5:(c3=='D'?c7:c5));
									let c11 = c4=='M'?c6:(c4=='P'?c5:(c4=='D'?c7:c5));
									if(c8+c9+c10+c11=="FFBZ") {
										console.log(c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+c11);
									}
									c8 = c1=='M'?c6:(c1=='P'?c5:(c1=='D'?c7:c6));
									c9 = c2=='M'?c6:(c2=='P'?c5:(c2=='D'?c7:c6));
									c10 = c3=='M'?c6:(c3=='P'?c5:(c3=='D'?c7:c6));
									c11 = c4=='M'?c6:(c4=='P'?c5:(c4=='D'?c7:c6));
									if(c8+c9+c10+c11=="FFBZ") {
										console.log(c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+c11);
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
printPermutations("table6");

</script>
</html>